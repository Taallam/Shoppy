import type { NextPage } from 'next'
import Head from 'next/head'
import { HomeHeader } from '../components/Header/Header'
import { Product } from '../components/Product'
import styled from '@emotion/styled'
import { useState, useEffect } from 'react'

const Home: NextPage = () => {
  const [searchTerm, setSearchTerm] = useState('')
  const [products, setProducts] = useState(listOfProducts)

  useEffect(() => {
    const newProducts = listOfProducts.filter(product => product.productName.includes(searchTerm))
    setProducts(newProducts)
  }, [searchTerm])

  return (
    <div>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <HomeHeader searchTerm={searchTerm} setSearchTerm={setSearchTerm} />
      <ProductsContainer>
        {products.map((product) => (
          <Product
            key={product.key}
            productPrice={product.productPrice}
            productName={product.productName}
            productImage={product.productImage}
          >
            {product.productDescription}
          </Product>
        ))}
      </ProductsContainer>
    </div>
  )
}

const ProductsContainer = styled.div`
  display: flex;
  flex-wrap: wrap;
`

const listOfProducts = [
  {
    key: '1',
    productPrice: '$10',
    productName: 'Kit-Kat',
    productImage: 'https://picsum.photos/300/200?random=1',
    productDescription:
      'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris ac',
  },
  {
    key: '2',
    productPrice: '$23',
    productName: 'Coca-cola',
    productImage: 'https://picsum.photos/300/200?random=2',
    productDescription:
      'sagittis urna. Nulla eu orci placerat, congue magna eu, egestas purus.',
  },
  {
    key: '3',
    productPrice: '$99',
    productName: 'Noodles',
    productImage: 'https://picsum.photos/300/200?random=3',
    productDescription:
      'Vivamus ullamcorper sed enim eget tincidunt. Aliquam blandit condimentum',
  },
  {
    key: '4',
    productPrice: '$30',
    productName: 'Chips',
    productImage: 'https://picsum.photos/300/200?random=4',
    productDescription: 'This is a good chips',
  },
]

export default Home
